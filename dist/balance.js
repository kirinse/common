define("kirin/common/1.0.0/balance",["jquery/jquery/1.7.2/jquery","./dropdown","arale/popup/1.1.6/popup","$","arale/overlay/1.1.4/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","gallery/handlebars/1.0.2/handlebars"],function(a,b,c){function d(a,b){var c={infos:a.infos},d=g.compile('{{#infos}}<li><div>\n                        <span class="app" title="{{{app}}}">\n                          {{{app}}}: \n                        </span>\n                        <span class="amount">\n                          <i class="iconfont amount"></i>\n                          {{{balance}}}\n                        </span>\n                      </div></li>{{/infos}}');b.html(d(c)).removeClass("global-loading")}var e=a("jquery/jquery/1.7.2/jquery"),f=a("./dropdown"),g=a("gallery/handlebars/1.0.2/handlebars"),h=!1,i=window.GLOBAL||{},j={balanceurl:i.system.personal+"/ajax/balance/getBalance.json?_callback=?"},k=f.extend({events:{"click #global-refresh-balance":"refresh"},setup:function(){k.superclass.setup.call(this)},show:function(){var a=this.$("#global-list-more");return h||(h=!0,e.ajax(j.balanceurl,{dataType:"jsonp"}).success(function(b){return"ok"!=b.stat?(h=!1,a.hide(),void 0):(h=!0,d(b,a),void 0)}).error(function(){h=!1,a.hide()})),k.superclass.show.call(this)},refresh:function(a){a.preventDefault();var b=this.$("#global-list-more");b.html("").addClass("global-loading"),e.ajax(j.balanceurl,{dataType:"jsonp"}).success(function(a){return"ok"!=a.stat?(h=!1,b.hide(),void 0):(h=!0,d(a,b),void 0)}).error(function(){h=!1,b.hide()})}});c.exports=k}),define("kirin/common/1.0.0/dropdown",["arale/popup/1.1.6/popup","$","arale/overlay/1.1.4/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(a,b,c){var d=a("arale/popup/1.1.6/popup"),e=d.extend({setup:function(){e.superclass.setup.call(this),this._tweakAlignDefaultValue()},_tweakAlignDefaultValue:function(){var a=this.get("align");a.baseXY.toString()===[0,0].toString()&&(a.baseXY=[0,"100%"]),"VIEWPORT"===a.baseElement._id&&(a.baseElement=this.get("trigger")),this.set("align",a)}});c.exports=e});
